<div class="home-container">
    <header class="hero-section">
        <h1>Restaurant & Hotel Blacklist Check</h1>
        <p>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤</p>
    </header>

    <section class="search-section">
        <div class="search-bar">
            <input type="text" [(ngModel)]="search" (keyup.enter)="onSearch()"
                placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà...">
            <button (click)="onSearch()">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
        </div>
        <div class="filter-buttons">
            <button [class.active]="typeFilter === ''" (click)="onFilterChange('')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
            <button [class.active]="typeFilter === 'restaurant'"
                (click)="onFilterChange('restaurant')">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
            <button [class.active]="typeFilter === 'hotel'" (click)="onFilterChange('hotel')">‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°</button>
        </div>
    </section>

    <section class="results-section">
        <div *ngIf="loading" class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>

        <div *ngIf="!loading && blacklists.length === 0" class="no-results">
            ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        </div>

        <div class="blacklist-grid">
            <div *ngFor="let item of blacklists" class="blacklist-card" (click)="viewDetails(item.id)">
                <div class="card-image">
                    <img *ngIf="item.image_url" [src]="item.image_url" [alt]="item.name"
                        (error)="handleImageError(item)">
                    <div *ngIf="!item.image_url" class="fallback-icon" [ngClass]="item.type">
                        <!-- Restaurant Icon -->
                        <svg *ngIf="item.type === 'restaurant'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path
                                d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z" />
                        </svg>
                        <!-- Hotel Icon -->
                        <svg *ngIf="item.type === 'hotel'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path
                                d="M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3zm12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4z" />
                        </svg>
                    </div>
                    <span class="type-badge">{{ item.type === 'restaurant' ? '‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£' : '‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°' }}</span>
                </div>
                <div class="card-content">
                    <h3>{{ item.name }}</h3>
                    <p class="address">{{ item.address || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà' }}</p>
                    <div class="rating">
                        <span class="stars">{{ '‚≠ê'.repeat(item.dissatisfaction_rating) }}</span>
                        <span class="rating-text">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÉ‡∏à {{ item.dissatisfaction_rating }}/5</span>
                    </div>
                    <div class="votes">
                        <span class="upvote">üëç {{ item.upvotes }}</span>
                        <span class="downvote">üëé {{ item.downvotes }}</span>
                    </div>

                    <!-- Admin-only delete button -->
                    <button *ngIf="authService.isAdmin()" class="delete-btn" (click)="deleteBlacklist($event, item.id)">
                        üóëÔ∏è ‡∏•‡∏ö
                    </button>
                </div>
            </div>
        </div>
    </section>

    <div class="pagination" *ngIf="totalPages > 1">
        <button (click)="prevPage()" [disabled]="currentPage === 1">‚Üê ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
        <span>‡∏´‡∏ô‡πâ‡∏≤ {{ currentPage }} / {{ totalPages }}</span>
        <button (click)="nextPage()" [disabled]="currentPage === totalPages">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
    </div>
</div>